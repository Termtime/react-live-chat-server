(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},109:function(e,t,s){},110:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s(1),r=s.n(n),i=s(23),a=s.n(i),o=(s(60),s(38),s(61),s(62),s(8)),l=s(18),d=(s(68),s(53)),j=s.n(d),u=s(3),m=function(e){return Object(c.jsx)("div",{className:"row message",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("small",{className:"username",children:e.user.username})}),Object(c.jsx)("div",{className:"row ",children:Object(c.jsx)("p",{className:"wrap messageText",children:e.message.body})}),Object(c.jsx)("div",{className:"row timeStamp",children:Object(c.jsx)("small",{children:e.message.time})})]})})},b=function(e){return Object(c.jsx)("div",{className:"row ownMessage",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("p",{className:"wrap messageText",children:e.message.body})}),Object(c.jsx)("div",{className:"row timeStamp",children:Object(c.jsx)("small",{children:e.message.time})})]})})},p=s.p+"static/media/exit.f0dbdb09.svg",O="USER_JOINED",h="DISCONNECTED",x="RECEIVED_MSG",f="CONNECT",g="INITIALIZE",v="JOIN_ROOM",y="IS_TYPING",N="STOPPED_TYPING",w=Object(o.b)((function(e){return{messages:e.messages,users:e.users,ownUser:e.ownUser,roomId:e.roomId}}),(function(e){return{disconnect:function(){return e({type:h})}}}))((function(e){var t=Object(u.f)();return Object(c.jsxs)("div",{className:"col messageBox-container",children:[Object(c.jsxs)("div",{className:"row messageBox-container-header",children:[Object(c.jsx)("div",{className:"col",children:Object(c.jsxs)("p",{children:["Room: ",e.roomId," "]})}),Object(c.jsx)("div",{className:"col text-right",children:Object(c.jsxs)("div",{className:"row right text-right",children:[Object(c.jsxs)("p",{style:{lineHeight:"3vh"},children:[e.users.length," ","".concat(1===e.users.length?"user":"users")," ","online"]}),Object(c.jsx)("img",{alt:"exit-button",id:"exit-btn",src:p,onClick:function(){t.push("/")}})]})})]}),Object(c.jsx)("div",{id:"messages",className:"row ",children:Object(c.jsx)("div",{className:"col",children:e.messages.map((function(t,s){return t.user.id===e.ownUser.id?Object(c.jsx)(b,{message:t},s):Object(c.jsx)(m,{message:t,user:t.user},s)}))})})]})})),U=s(10),I=s(54),T=s.n(I),k=function(e){var t=e.appendEmoji,s=Object(n.useState)(!1),r=Object(U.a)(s,2),i=r[0],a=r[1];return Object(c.jsx)("div",{className:"mr-1",children:i?Object(c.jsxs)("div",{className:"d-flex col",children:[Object(c.jsx)("div",{className:"row emojiPicker",children:Object(c.jsx)(T.a,{onEmojiClick:t})}),Object(c.jsx)("div",{className:"row justify-content-end",children:Object(c.jsx)("button",{id:"emojiBtn",className:"btn btn-success",onClick:function(e){return a(!i)},children:"\ud83d\ude00"})})]}):Object(c.jsx)("button",{className:"btn btn-secondary",onClick:function(e){return a(!i)},children:"\ud83d\ude00"})})},S=null,E=Object(o.b)((function(e){return{socket:e.socket,ownUser:e.ownUser,roomId:e.roomId}}),(function(e){return{}}))((function(e){var t=Object(n.useState)(""),s=Object(U.a)(t,2),r=s[0],i=s[1],a=function(t){if(t&&t.preventDefault(),0!==r.trim().length){var s={body:r,user:e.ownUser,roomId:e.roomId,date:new Date,time:(new Date).toLocaleTimeString("en-US")};i(""),e.socket.current.emit("send-msg",s),o()}},o=function(){e.socket.current.emit("clientStoppedTyping",e.roomId),S&&clearTimeout(S),S=null},l=function(t){S?clearTimeout(S):e.socket.current.emit("isTyping",e.roomId),S=setTimeout(o,3e3),i(t.target.value)};return Object(c.jsxs)("form",{style:{alignItems:"flex-end"},className:"row form-inline",onSubmit:a,children:[Object(c.jsx)("textarea",{id:"msgInput",rows:"1",className:"form-control mr-0",value:r,onInput:l,onKeyDown:function(e){13!==e.keyCode||e.shiftKey||(S&&clearTimeout(S),a(),e&&e.preventDefault())},placeholder:"Write something..."}),Object(c.jsx)(k,{appendEmoji:function(e,t){l({target:{value:r+t.emoji}})}}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})})),C=s.p+"static/media/user.4ad10357.svg",D=function(e){return Object(c.jsxs)("div",{className:"userlist-username",children:[Object(c.jsx)("img",{alt:"user-icon",src:C,className:"avatar"}),Object(c.jsx)("span",{children:e.user.username})]})},R=Object(o.b)((function(e){return{users:e.users}}),(function(e){return{}}))((function(e){return Object(c.jsx)("div",{className:"userList-container",children:Object(c.jsxs)("div",{className:"userList",children:[Object(c.jsx)("div",{id:"userlist-title",className:"row center",children:Object(c.jsx)("p",{children:"Users"})}),Object(c.jsx)("div",{id:"users",children:e.users.map((function(e,t){return Object(c.jsx)(D,{user:e},t)}))})]})})})),L=Object(o.b)((function(e){return{users:e.users,socketREF:e.socket,messages:e.messages,roomId:e.roomId,ownUser:e.ownUser,typingUsers:e.typingUsers}}),(function(e){return{disconnect:function(){return e({type:h})},connect:function(t){return e({type:f,payload:t})},initialize:function(t){return e({type:g,payload:t})},receivedMessage:function(t){return e({type:x,payload:t})},updateUserlist:function(t){return e({type:O,payload:t})},addTypingUser:function(t){return e({type:y,payload:t})},removeTypingUser:function(t){return e({type:N,payload:t})}}}))((function(e){var t=Object(u.f)(),r=Object(n.useRef)(),i=Object(n.useRef)();Object(n.useEffect)((function(){s(106).config();return e.roomId&&e.ownUser.username?(r.current=j.a.connect("https://termtime-live-chat.herokuapp.com"),e.initialize(r),r.current.on("own-id",(function(t){var s={username:e.ownUser.username,id:t,room:e.roomId};e.connect(s),r.current.emit("presentation",s)})),r.current.on("userlist-update",(function(t){e.updateUserlist(t),i.current=t})),r.current.on("msg",(function(e){a(e)})),r.current.on("isTyping",(function(t){console.log("".concat(t," is typing..."));var s=i.current.find((function(e){return e.id===t}));void 0!==s&&e.addTypingUser(s)})),r.current.on("stoppedTyping",(function(t){console.log("".concat(t," stopped typing...")),void 0!==i.current.find((function(e){return e.id===t}))&&e.removeTypingUser(t)})),function(){r.current.emit("leave",e.roomId),r.current.close()}):(t.push("/"),void e.disconnect())}),[]);var a=function(t){e.receivedMessage(t),document.querySelector("#messages").scrollTo(0,document.querySelector("#messages").scrollHeight)};return Object(c.jsx)("div",{className:"flex-container col App ",children:Object(c.jsxs)("div",{id:"app",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(w,{}),Object(c.jsx)(R,{})]}),Object(c.jsx)("div",{id:"typingStatus",children:Object(c.jsx)("small",{className:"text-white",children:function(){var t="";if(1===e.typingUsers.length)t=e.typingUsers.map((function(e){return e.username}))+" is typing...";else if(e.typingUsers.length>1){var s=Object(l.a)(e.typingUsers.map((function(e){return e.username})));s.pop(),console.log(s),t=s.join(",")+" and "+e.typingUsers[s.length].username+" are typing..."}else t=e.typingUsers.length>5?"Multiple people are typing...":Object(c.jsx)("div",{children:"\xa0"});return t}()},"users-typing")}),Object(c.jsx)(E,{})]})})})),M=(s(109),Object(o.b)((function(e){return{}}),(function(e){return{setRoom:function(t){return e({type:v,payload:t})}}}))((function(e){var t=Object(u.f)(),s=Object(n.useState)(""),r=Object(U.a)(s,2),i=r[0],a=r[1],o=Object(n.useState)(""),l=Object(U.a)(o,2),d=l[0],j=l[1];return Object(c.jsx)("div",{className:"homepage",children:Object(c.jsxs)("div",{className:"",children:[Object(c.jsxs)("div",{className:"homepage-header",children:[Object(c.jsxs)("div",{className:"whiteTxt",children:[Object(c.jsx)("div",{className:"row center",children:Object(c.jsx)("h1",{children:" Welcome to Live-chat!"})}),Object(c.jsx)("div",{className:"row center",children:Object(c.jsx)("h3",{children:" Join chat rooms, and talk to your friends!"})})]}),Object(c.jsxs)("form",{onSubmit:function(s){s&&s.preventDefault(),e.setRoom({room:d,username:i}),t.push("/room")},children:[Object(c.jsx)("div",{className:"offset-2 col-8 ",children:Object(c.jsxs)("div",{className:"input-group flex-nowrap",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("label",{children:Object(c.jsx)("span",{className:"input-group-text",children:"Username:"})})}),Object(c.jsx)("input",{type:"text",className:"form-control",value:i,onInput:function(e){return a(e.target.value)},placeholder:"Termtime",required:!0})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"center form-inline",children:Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("label",{children:Object(c.jsx)("span",{className:"input-group-text",children:"Room name:"})})}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Termtime's room",value:d,onInput:function(e){return j(e.target.value)},required:!0}),Object(c.jsx)("div",{className:"input-group-append",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Join"})})]})})]}),Object(c.jsx)("br",{})]}),Object(c.jsx)("div",{className:"homepage-bottom",children:Object(c.jsxs)("div",{className:"row center",children:[Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)("div",{className:"card ",children:Object(c.jsxs)("div",{className:"card-body text-dark",children:[Object(c.jsxs)("h3",{className:"card-title ",children:[Object(c.jsx)("b",{children:"What"})," do we do?"]}),Object(c.jsx)("hr",{}),Object(c.jsx)("p",{children:"Offer a free space to chat and talk with friends or random people about common topics or interests."})]})})}),Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{className:"card-body text-dark",children:[Object(c.jsxs)("h3",{className:"card-title ",children:[Object(c.jsx)("b",{children:"How"})," do we do it?"]}),Object(c.jsx)("hr",{}),Object(c.jsx)("p",{children:"Using Express and Socket.io with rooms we can connect people through a simple WebApp."})]})})}),Object(c.jsx)("div",{className:"col-3",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{className:"card-body text-dark",children:[Object(c.jsxs)("h3",{className:"card-title ",children:[Object(c.jsx)("b",{children:"Why"})," do we do it?"]}),Object(c.jsx)("hr",{}),Object(c.jsx)("p",{children:"Because there is always a need to explore new and fun ways to use and apply technology in daily life."})]})})})]})})]})})}))),P=s(15),B=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,111)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),c(e),n(e),r(e),i(e)}))},J=s(25),F=s(4),W={ownUser:{},socket:{},users:[],typingUsers:[],messages:[],roomId:""};var _=Object(J.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(F.a)(Object(F.a)({},e),{},{ownUser:{username:t.payload.username},roomId:t.payload.room});case h:return W;case O:return Object(F.a)(Object(F.a)({},e),{},{users:t.payload});case f:return Object(F.a)(Object(F.a)({},e),{},{ownUser:t.payload});case g:return Object(F.a)(Object(F.a)({},e),{},{socket:t.payload});case y:return Object(F.a)(Object(F.a)({},e),{},{typingUsers:[].concat(Object(l.a)(e.typingUsers),[t.payload])});case N:return Object(F.a)(Object(F.a)({},e),{},{typingUsers:e.typingUsers.filter((function(e){return e.id!==t.payload}))});case x:return Object(F.a)(Object(F.a)({},e),{},{messages:[].concat(Object(l.a)(e.messages),[t.payload])});default:return e}}));a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(P.a,{children:Object(c.jsx)(o.a,{store:_,children:Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{exact:!0,path:"/",component:M}),Object(c.jsx)(u.a,{exact:!0,path:"/room",component:L})]})})})}),document.getElementById("root")),B()},60:function(e,t,s){},68:function(e,t,s){}},[[110,1,2]]]);
//# sourceMappingURL=main.e704d37e.chunk.js.map