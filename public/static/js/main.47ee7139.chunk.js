(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t){},110:function(e,t,s){},111:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s(1),r=s.n(c),i=s(24),a=s.n(i),o=(s(61),s(38),s(62),s(63),s(8)),l=s(19),d=(s(69),s(53)),j=s.n(d),u=s(3),m=function(e){return Object(n.jsx)("div",{className:"row message",children:Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("small",{className:"username",children:e.user.username})}),Object(n.jsx)("div",{className:"row ",children:Object(n.jsx)("p",{className:"wrap messageText",children:e.message.body})}),Object(n.jsx)("div",{className:"row timeStamp",children:Object(n.jsx)("small",{children:e.message.time})})]})})},b=function(e){return Object(n.jsx)("div",{className:"row ownMessage",children:Object(n.jsxs)("div",{className:"col",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("p",{className:"wrap messageText",children:e.message.body})}),Object(n.jsx)("div",{className:"row timeStamp",children:Object(n.jsx)("small",{children:e.message.time})})]})})},p=s.p+"static/media/exit.f0dbdb09.svg",O="USER_JOINED",h="DISCONNECTED",x="RECEIVED_MSG",f="CONNECT",g="INITIALIZE",v="JOIN_ROOM",y="IS_TYPING",N="STOPPED_TYPING",w=Object(o.b)((function(e){return{messages:e.messages,users:e.users,ownUser:e.ownUser,roomId:e.roomId}}),(function(e){return{disconnect:function(){return e({type:h})}}}))((function(e){var t=Object(u.f)();return Object(n.jsxs)("div",{className:"col messageBox-container",children:[Object(n.jsxs)("div",{className:"row messageBox-container-header",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsxs)("p",{children:["Room: ",e.roomId," "]})}),Object(n.jsx)("div",{className:"col text-right",children:Object(n.jsxs)("div",{className:"row right text-right",children:[Object(n.jsxs)("p",{style:{lineHeight:"3vh"},children:[e.users.length," ","".concat(1===e.users.length?"user":"users")," ","online"]}),Object(n.jsx)("img",{alt:"exit-button",id:"exit-btn",src:p,onClick:function(){t.push("/")}})]})})]}),Object(n.jsx)("div",{id:"messages",className:"row ",children:Object(n.jsx)("div",{className:"col",children:e.messages.map((function(t,s){return t.user.id===e.ownUser.id?Object(n.jsx)(b,{message:t},s):Object(n.jsx)(m,{message:t,user:t.user},s)}))})})]})})),U=s(10),I=s(54),T=s.n(I),S=function(e){var t=e.appendEmoji,s=Object(c.useState)(!1),r=Object(U.a)(s,2),i=r[0],a=r[1];return Object(n.jsx)("div",{className:"mr-1",children:i?Object(n.jsxs)("div",{className:"d-flex col",children:[Object(n.jsx)("div",{className:"row emojiPicker",children:Object(n.jsx)(T.a,{onEmojiClick:t})}),Object(n.jsx)("div",{className:"row justify-content-end",children:Object(n.jsx)("button",{id:"emojiBtn",className:"btn btn-success",onClick:function(e){return a(!i)},children:"\ud83d\ude00"})})]}):Object(n.jsx)("button",{className:"btn btn-secondary",onClick:function(e){return a(!i)},children:"\ud83d\ude00"})})},k=null,E=Object(o.b)((function(e){return{socket:e.socket,ownUser:e.ownUser,roomId:e.roomId}}),(function(e){return{}}))((function(e){var t=Object(c.useState)(""),s=Object(U.a)(t,2),r=s[0],i=s[1],a=function(t){if(t&&t.preventDefault(),0!==r.trim().length){var s={body:r,user:e.ownUser,roomId:e.roomId,date:new Date,time:(new Date).toLocaleTimeString("en-US")};i(""),e.socket.current.emit("send-msg",s),o()}},o=function(){e.socket.current.emit("clientStoppedTyping",e.roomId),k&&clearTimeout(k),k=null},l=function(t){k?clearTimeout(k):e.socket.current.emit("isTyping",e.roomId),k=setTimeout(o,3e3),i(t.target.value)};return Object(n.jsxs)("form",{style:{alignItems:"flex-end"},className:"row form-inline",onSubmit:a,children:[Object(n.jsx)("textarea",{id:"msgInput",rows:"1",className:"form-control mr-0",value:r,onInput:l,onKeyDown:function(e){13!==e.keyCode||e.shiftKey||(k&&clearTimeout(k),a(),e&&e.preventDefault())},placeholder:"Write something..."}),Object(n.jsx)(S,{appendEmoji:function(e,t){l({target:{value:r+t.emoji}})}}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Send"})]})})),C=s.p+"static/media/user.4ad10357.svg",D=function(e){return Object(n.jsxs)("div",{className:"userlist-username",children:[Object(n.jsx)("img",{alt:"user-icon",src:C,className:"avatar"}),Object(n.jsxs)("span",{children:[e.user.username,e.user.isCurrentUser?" (You)":null]})]})},R=Object(o.b)((function(e){return{users:e.users}}),(function(e){return{}}))((function(e){return Object(n.jsx)("div",{className:"userList-container",children:Object(n.jsxs)("div",{className:"userList",children:[Object(n.jsx)("div",{id:"userlist-title",className:"row center",children:Object(n.jsx)("p",{children:"Users"})}),Object(n.jsx)("div",{id:"users",children:e.users.map((function(e,t){return Object(n.jsx)(D,{user:e},t)}))})]})})})),L=Object(o.b)((function(e){return{users:e.users,socketREF:e.socket,messages:e.messages,roomId:e.roomId,ownUser:e.ownUser,typingUsers:e.typingUsers}}),(function(e){return{disconnect:function(){return e({type:h})},connectToServer:function(t){return e({type:f,payload:t})},initialize:function(t){return e({type:g,payload:t})},receivedMessage:function(t){return e({type:x,payload:t})},updateUserlist:function(t){return e({type:O,payload:t})},addTypingUser:function(t){return e({type:y,payload:t})},removeTypingUser:function(t){return e({type:N,payload:t})}}}))((function(e){var t=Object(u.f)(),r=Object(c.useRef)(),i=Object(c.useRef)(),a=Object(c.useRef)();Object(c.useEffect)((function(){s(107).config();return e.roomId&&e.ownUser.username?(r.current=j.a.connect("https://termtime-live-chat.herokuapp.com"),e.initialize(r),r.current.on("own-id",(function(t){console.log("received uid ".concat(t," for username ").concat(e.ownUser.username," in room ").concat(e.roomId)),a.current={username:e.ownUser.username,id:t,room:e.roomId},e.connectToServer(a),r.current.emit("presentation",a.current)})),r.current.on("userlist-update",(function(t){var s=t.findIndex((function(e){return e.id===a.current.id}));-1!==s&&(t[s].isCurrentUser=!0),e.updateUserlist(t),i.current=t})),r.current.on("msg",(function(e){o(e)})),r.current.on("isTyping",(function(t){console.log("".concat(t," is typing..."));var s=i.current.find((function(e){return e.id===t}));void 0!==s&&e.addTypingUser(s)})),r.current.on("stoppedTyping",(function(t){console.log("".concat(t," stopped typing...")),void 0!==i.current.find((function(e){return e.id===t}))&&e.removeTypingUser(t)})),function(){r.current.emit("leave",e.roomId),r.current.close()}):(t.push("/"),void e.disconnect())}),[]);var o=function(t){e.receivedMessage(t),document.querySelector("#messages").scrollTo(0,document.querySelector("#messages").scrollHeight)};return Object(n.jsx)("div",{className:"flex-container col App ",children:Object(n.jsxs)("div",{id:"app",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)(w,{}),Object(n.jsx)(R,{})]}),Object(n.jsx)("div",{id:"typingStatus",children:Object(n.jsx)("small",{className:"text-white",children:function(){var t="";if(1===e.typingUsers.length)t=e.typingUsers.map((function(e){return e.username}))+" is typing...";else if(e.typingUsers.length>1){var s=Object(l.a)(e.typingUsers.map((function(e){return e.username})));s.pop(),console.log(s),t=s.join(",")+" and "+e.typingUsers[s.length].username+" are typing..."}else t=e.typingUsers.length>5?"Multiple people are typing...":Object(n.jsx)("div",{children:"\xa0"});return t}()},"users-typing")}),Object(n.jsx)(E,{})]})})})),M=(s(110),Object(o.b)((function(e){return{}}),(function(e){return{setRoom:function(t){return e({type:v,payload:t})}}}))((function(e){var t=Object(u.f)(),s=Object(c.useState)(""),r=Object(U.a)(s,2),i=r[0],a=r[1],o=Object(c.useState)(""),l=Object(U.a)(o,2),d=l[0],j=l[1];return Object(n.jsx)("div",{className:"homepage",children:Object(n.jsxs)("div",{className:"",children:[Object(n.jsxs)("div",{className:"homepage-header",children:[Object(n.jsxs)("div",{className:"whiteTxt",children:[Object(n.jsx)("div",{className:"row center",children:Object(n.jsx)("h1",{children:" Welcome to Live-chat!"})}),Object(n.jsx)("div",{className:"row center",children:Object(n.jsx)("h3",{children:" Join chat rooms, and talk to your friends!"})})]}),Object(n.jsxs)("form",{onSubmit:function(s){s&&s.preventDefault(),e.setRoom({room:d,username:i}),t.push("/room")},children:[Object(n.jsx)("div",{className:"offset-2 col-8 ",children:Object(n.jsxs)("div",{className:"input-group flex-nowrap",children:[Object(n.jsx)("div",{className:"input-group-prepend",children:Object(n.jsx)("label",{children:Object(n.jsx)("span",{className:"input-group-text",children:"Username:"})})}),Object(n.jsx)("input",{type:"text",className:"form-control",value:i,onInput:function(e){return a(e.target.value)},placeholder:"Termtime",required:!0})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"center form-inline",children:Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("div",{className:"input-group-prepend",children:Object(n.jsx)("label",{children:Object(n.jsx)("span",{className:"input-group-text",children:"Room name:"})})}),Object(n.jsx)("input",{type:"text",className:"form-control",placeholder:"Termtime's room",value:d,onInput:function(e){return j(e.target.value)},required:!0}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Join"})})]})})]}),Object(n.jsx)("br",{})]}),Object(n.jsx)("div",{className:"homepage-bottom",children:Object(n.jsxs)("div",{className:"row center",children:[Object(n.jsx)("div",{className:"col-3",children:Object(n.jsx)("div",{className:"card ",children:Object(n.jsxs)("div",{className:"card-body text-dark",children:[Object(n.jsxs)("h3",{className:"card-title ",children:[Object(n.jsx)("b",{children:"What"})," do we do?"]}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{children:"Offer a free space to chat and talk with friends or random people about common topics or interests."})]})})}),Object(n.jsx)("div",{className:"col-3",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-body text-dark",children:[Object(n.jsxs)("h3",{className:"card-title ",children:[Object(n.jsx)("b",{children:"How"})," do we do it?"]}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{children:"Using Express and Socket.io with rooms we can connect people through a simple WebApp."})]})})}),Object(n.jsx)("div",{className:"col-3",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-body text-dark",children:[Object(n.jsxs)("h3",{className:"card-title ",children:[Object(n.jsx)("b",{children:"Why"})," do we do it?"]}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{children:"Because there is always a need to explore new and fun ways to use and apply technology in daily life."})]})})})]})})]})})}))),P=s(15),B=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,112)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),r(e),i(e)}))},J=s(16),W=s(4),F={ownUser:{},socket:{},users:[],typingUsers:[],messages:[],roomId:""};var _=s(55),q=Object(J.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(W.a)(Object(W.a)({},e),{},{ownUser:{username:t.payload.username},roomId:t.payload.room});case h:return F;case O:return Object(W.a)(Object(W.a)({},e),{},{users:t.payload});case f:return Object(W.a)(Object(W.a)({},e),{},{ownUser:t.payload});case g:return Object(W.a)(Object(W.a)({},e),{},{socket:t.payload});case y:return Object(W.a)(Object(W.a)({},e),{},{typingUsers:[].concat(Object(l.a)(e.typingUsers),[t.payload])});case N:return Object(W.a)(Object(W.a)({},e),{},{typingUsers:e.typingUsers.filter((function(e){return e.id!==t.payload}))});case x:return Object(W.a)(Object(W.a)({},e),{},{messages:[].concat(Object(l.a)(e.messages),[t.payload])});default:return e}}),Object(_.composeWithDevTools)());a.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(P.a,{children:Object(n.jsx)(o.a,{store:q,children:Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{exact:!0,path:"/",component:M}),Object(n.jsx)(u.a,{exact:!0,path:"/room",component:L})]})})})}),document.getElementById("root")),B()},61:function(e,t,s){},69:function(e,t,s){}},[[111,1,2]]]);
//# sourceMappingURL=main.47ee7139.chunk.js.map